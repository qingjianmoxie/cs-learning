# lambda表达式

## 什么是lambda表达式

C++ 11 中的 Lambda 表达式用于定义并创建匿名的函数对象，以简化编程工作。

先举个简单的小栗子:

```c++
#include <iostream>

int main() {
    int girls = 3, boys = 4;
    auto totalChild = [](int x, int y) -> int { return x + y; };
    std::cout << totalChild(girls, boys) << std::endl;
    return 0;
}
```

Lambda 的语法形式如下：

    [函数对象参数] (操作符重载函数参数) mutable或exception声明 -> 返回值类型 {函数体}

可以看到，Lambda 主要分为五个部分：[函数对象参数]、(操作符重载函数参数)、mutable或exception声明、-> 返回值类型、{函数体}.

##  Lambda 语法分析

1. [函数对象参数]

标识一个 Lambda 表达式的开始，这部分必须存在，不能省略.

Lambda 函数可以引用在它之外声明的变量. 这些变量的集合叫做一个闭包. 闭包被定义在 Lambda 表达式声明中的方括号 [] 内。这个机制允许这些变量被按值或按引用捕获。

[]这东西就用来设置读取变量方式的。比如当前作用域有个变量 i ,你可以选择按 [值、址] 来引用它, 它有两个通配符 `=` 和 `&`, 一个取值一个取址。
它有几个组合用法：
+ []      // 空, 没有任何函数对象参数
+ [=]     // 函数体内可以使用 Lambda 所在范围内所有可见的局部变量（包括 Lambda 所在类的 this），并且是值传递方式（相当于编译器自动为我们按值传递了所有局部变量）。
+ [&]     // 函数体内可以使用 Lambda 所在范围内所有可见的局部变量（包括 Lambda 所在类的 this），并且是引用传递方式（相当于是编译器自动为我们按引用传递了所有局部变量）。
+ [a]     // a 传值 。按值进行传递时，函数体内不能修改传递进来的 a 的拷贝，因为默认情况下函数是 const 的，要修改传递进来的拷贝，可以添加 mutable 修饰符。
+ [&a]    // a 传址
+ [a, &b] // a 传值，b 传址
+ [=, &b] // 全都传值，但是b 除外（传址）
+ [&, b]  // 全都传址，但是b 除外（传值）

2. (操作符重载函数参数)

标识重载的 () 操作符的参数，没有参数时，这部分可以省略。参数可以通过按值（如: (a, b)）和按引用 (如: (&a, &b)) 两种方式进行传递。

3. mutable 或 exception 声明

这部分可以省略。按值传递函数对象参数时，加上 mutable 修饰符后，可以修改传递进来的拷贝（注意是能修改拷贝，而不是值本身）。exception 声明用于指定函数抛出的异常，如抛出整数类型的异常，可以使用 throw(int)。

4. -> 返回值类型

标识函数返回值的类型，当返回值为 void，或者函数体中只有一处 return 的地方（此时编译器可以自动推断出返回值类型）时，这部分可以省略。

5. {函数体}

标识函数的实现，这部分不能省略，但函数体可以为空。
