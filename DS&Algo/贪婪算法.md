# 贪婪算法

本章内容
+ 学习如何处理不可能完成的任务：没有快速算法的问题（NP完全问题）。
+ 学习识别NP完全问题，以免浪费时间去寻找解决它们的快速算法。
+ 学习近似算法，使用它们可快速找到NP完全问题的近似解。
+ 学习贪婪策略——一种非常简单的问题解决策略。

## 1. 教室调度问题

假设有如下课程表，你希望将尽可能多的课程安排在某间教室上。

| 课程 | 开始时间 | 结束时间 |
| :- | :- | :- |
| 美术 | 9AM | 10AM |
| 英语 | 9:30AM | 10:30AM |
| 数学 | 10AM | 11AM |
| 计算机 | 10:30AM | 11:30AM |
| 音乐 | 11AM | 12AM |

你没法让这些课都在这间教室上，因为有些课的上课时间有冲突。

你希望在这间教室上尽可能多的课。如何选出尽可能多且时间不冲突的课程呢？

这个问题好像很难，不是吗？实际上，算法可能简单得让你大吃一惊。具体做法如下。

(1) 选出结束最早的课，它就是要在这间教室上的第一堂课。

(2) 接下来，必须选择第一堂课结束后才开始的课。同样，你选择结束最早的课，这将是要在这间教室上的第二堂课。

重复这样做就能找出答案！下面来试一试。美术课的结束时间最早，为10:00 a.m.，因此它
就是第一堂课。

接下来的课必须在10:00 a.m.后开始，且结束得最早。

英语课不行，因为它的时间与美术课冲突，但数学课满足条件。最后，计算机课与数学课的时间是冲突的，但音乐课可以。

因此将在这间教室上美术, 数学, 音乐三堂课。

很多人都跟我说，这个算法太容易、太显而易见，肯定不对。但这正是贪婪算法的优点——简单易行！贪婪算法很简单：每步都采取最优的做法。在这个示例中，你每次都选择结束最早的课。用专业术语说，就是你每步都选择*局部最优解*，最终得到的就是全局最优解。信不信由你，对于这个调度问题，上述简单算法找到的就是最优解！

显然，贪婪算法并非在任何情况下都行之有效，但它易于实现！下面再来看一个例子。

## 2. 背包问题

假设你是个贪婪的小偷，背着可装4磅东西的背包，在商场伺机盗窃各种可装入背包的商品。

你力图往背包中装入价值最高的商品，你会使用哪种算法呢？

同样，你采取贪婪策略，这非常简单。

(1) 盗窃可装入背包的最贵商品。

(2) 再盗窃还可装入背包的最贵商品，以此类推。

只是这次这种贪婪策略不好使了！例如，你可盗窃的商品有下面三种。

    音响 3000美元 4磅
    笔记本电脑 2000美元 3磅
    吉他 1500美元 1磅

你的背包可装4磅的东西。音响最贵，你把它给偷了，但背包没有空间装其他东西了。

你偷到了价值3000美元的东西。且慢！如果不是偷音响，而是偷笔记本电脑和吉他，总价将为3500美元！

在这里，贪婪策略显然不能获得最优解，但非常接近。下一章将介绍如何找出最优解。不过小偷去购物中心行窃时，不会强求所偷东西的总价最高，只要差不多就行了。

从这个示例你得到了如下启示：**在有些情况下，完美是优秀的敌人**。有时候，你只需找到一个能够大致解决问题的算法，此时贪婪算法正好可派上用场，因为它们实现起来很容易，得到的结果又与正确结果相当接近。

广度优先算法和狄克斯特拉算法都是贪婪算法.

## 3. NP完全问题

NP完全问题的简单定义是，以难解著称的问题，如旅行商问题和集合覆盖问题。很多非常聪明的人都认为，根本不可能编写出可快速解决这些问题的算法。

NP完全问题无处不在！如果能够判断出要解决的问题属于NP完全问题就好了，这样就不用去寻找完美的解决方案，而是使用近似算法即可。但要判断问题是不是NP完全问题很难，易于解决的问题和NP完全问题的差别通常很小。例如，前一章深入讨论了最短路径，你知道如何找出从A点到B点的最短路径。

但如果要找出经由指定几个点的的最短路径，就是旅行商问题——NP完全问题。简言之，没办法判断问题是不是NP完全问题，但还是有一些蛛丝马迹可循的。

+ 元素较少时算法的运行速度非常快，但随着元素数量的增加，速度会变得非常慢。
+ 涉及“所有组合”的问题通常是NP完全问题。
+ 不能将问题分成小问题，必须考虑各种可能的情况。这可能是NP完全问题。
+ 如果问题涉及序列（如旅行商问题中的城市序列）且难以解决，它可能就是NP完全问题。
+ 如果问题涉及集合（如广播台集合）且难以解决，它可能就是NP完全问题。
+ 如果问题可转换为集合覆盖问题或旅行商问题，那它肯定是NP完全问题。

## 小结

+ 贪婪算法寻找局部最优解，企图以这种方式获得全局最优解。
+ 对于NP完全问题，还没有找到快速解决方案。
+ 面临NP完全问题时，最佳的做法是使用近似算法。
+ 贪婪算法易于实现、运行速度快，是不错的近似算法。